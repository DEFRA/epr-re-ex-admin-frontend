{
  "type": "object",
  "properties": {
    "businessType": {
      "type": "string",
      "enum": [
        "individual",
        "unincorporated",
        "partnership"
      ]
    },
    "companyDetails": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "tradingName": {
          "type": "string"
        },
        "companiesHouseNumber": {
          "type": "string",
          "pattern": "^[a-zA-Z0-9]{2}\\d{6}$"
        },
        "registeredAddress": {
          "type": "object",
          "properties": {
            "line1": {
              "type": "string"
            },
            "line2": {
              "type": "string"
            },
            "town": {
              "type": "string"
            },
            "county": {
              "type": "string"
            },
            "country": {
              "type": "string"
            },
            "postcode": {
              "type": "string"
            },
            "region": {
              "type": "string"
            },
            "fullAddress": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "address": {
          "type": "object",
          "properties": {
            "line1": {
              "type": "string"
            },
            "line2": {
              "type": "string"
            },
            "town": {
              "type": "string"
            },
            "county": {
              "type": "string"
            },
            "country": {
              "type": "string"
            },
            "postcode": {
              "type": "string"
            },
            "region": {
              "type": "string"
            },
            "fullAddress": {
              "type": "string"
            }
          },
          "additionalProperties": false
        }
      },
      "required": [
        "name"
      ],
      "additionalProperties": false
    },
    "formSubmissionTime": {
      "type": "string",
      "format": "date-time"
    },
    "id": {
      "not": {}
    },
    "linkedDefraOrganisation": {
      "type": "object",
      "properties": {
        "orgId": {
          "type": "string",
          "format": "uuid"
        },
        "orgName": {
          "type": "string"
        },
        "linkedBy": {
          "type": "object",
          "properties": {
            "email": {
              "type": "string",
              "format": "email"
            },
            "id": {
              "type": "string",
              "format": "uuid"
            }
          },
          "required": [
            "email",
            "id"
          ],
          "additionalProperties": false
        },
        "linkedAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "orgId",
        "orgName",
        "linkedBy",
        "linkedAt"
      ],
      "additionalProperties": false
    },
    "managementContactDetails": {
      "type": "object",
      "properties": {
        "fullName": {
          "type": "string"
        },
        "email": {
          "type": "string",
          "format": "email"
        },
        "phone": {
          "type": "string"
        },
        "jobTitle": {
          "type": "string"
        }
      },
      "required": [
        "fullName",
        "email",
        "phone",
        "jobTitle"
      ],
      "additionalProperties": false
    },
    "orgId": {
      "type": "number"
    },
    "partnership": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "ltd",
            "ltd_liability"
          ]
        },
        "partners": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "type": {
                "type": "string",
                "enum": [
                  "company",
                  "individual"
                ]
              }
            },
            "required": [
              "name",
              "type"
            ],
            "additionalProperties": false
          }
        }
      },
      "required": [
        "type"
      ],
      "additionalProperties": false
    },
    "reprocessingNations": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "england",
          "wales",
          "scotland",
          "northern_ireland"
        ]
      }
    },
    "status": {
      "type": "string",
      "enum": [
        "created",
        "approved",
        "active",
        "rejected"
      ]
    },
    "submittedToRegulator": {
      "type": "string",
      "enum": [
        "ea",
        "nrw",
        "sepa",
        "niea"
      ]
    },
    "submitterContactDetails": {
      "type": "object",
      "properties": {
        "fullName": {
          "type": "string"
        },
        "email": {
          "type": "string",
          "format": "email"
        },
        "phone": {
          "type": "string"
        },
        "jobTitle": {
          "type": "string"
        }
      },
      "required": [
        "fullName",
        "email",
        "phone",
        "jobTitle"
      ],
      "additionalProperties": false
    },
    "users": {
      "type": "array",
      "default": [],
      "items": {
        "type": "object",
        "properties": {
          "fullName": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "contactId": {
            "type": "string",
            "minLength": 1
          },
          "roles": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "enum": [
                "initial_user",
                "standard_user"
              ]
            }
          }
        },
        "required": [
          "fullName",
          "email",
          "roles"
        ],
        "additionalProperties": false
      }
    },
    "wasteProcessingTypes": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string",
        "enum": [
          "reprocessor",
          "exporter"
        ]
      }
    },
    "schemaVersion": {
      "const": 1
    },
    "registrations": {
      "type": "array",
      "default": [],
      "items": {
        "type": [
          "object",
          "null"
        ],
        "properties": {
          "id": {
            "type": [
              "string",
              "null"
            ],
            "readOnly": true
          },
          "status": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "created",
              "approved",
              "cancelled",
              "rejected",
              "suspended",
              null
            ]
          },
          "registrationNumber": {
            "type": [
              "string",
              "null"
            ]
          },
          "validFrom": {
            "type": [
              "string",
              "null"
            ],
            "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
          },
          "validTo": {
            "type": [
              "string",
              "null"
            ],
            "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
          },
          "formSubmissionTime": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time"
          },
          "submittedToRegulator": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "ea",
              "nrw",
              "sepa",
              "niea",
              null
            ]
          },
          "orgName": {
            "type": [
              "string",
              "null"
            ]
          },
          "material": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "aluminium",
              "fibre",
              "glass",
              "paper",
              "plastic",
              "steel",
              "wood",
              null
            ]
          },
          "wasteProcessingType": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "reprocessor",
              "exporter",
              null
            ]
          },
          "reprocessingType": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "input",
              "output",
              null
            ]
          },
          "site": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "address": {
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "line1": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "line2": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "town": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "county": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "country": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "postcode": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "region": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "fullAddress": {
                    "type": [
                      "string",
                      "null"
                    ]
                  }
                },
                "additionalProperties": false
              },
              "gridReference": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "siteCapacity": {
                "type": [
                  "array",
                  "null"
                ],
                "minItems": 1,
                "items": {
                  "type": [
                    "object",
                    "null"
                  ],
                  "properties": {
                    "material": {
                      "type": [
                        "string",
                        "null"
                      ],
                      "enum": [
                        "aluminium",
                        "fibre",
                        "glass",
                        "paper",
                        "plastic",
                        "steel",
                        "wood",
                        null
                      ]
                    },
                    "siteCapacityInTonnes": {
                      "type": [
                        "number",
                        "null"
                      ]
                    },
                    "siteCapacityTimescale": {
                      "type": [
                        "string",
                        "null"
                      ],
                      "enum": [
                        "weekly",
                        "monthly",
                        "yearly",
                        null
                      ]
                    }
                  },
                  "additionalProperties": false
                }
              }
            },
            "additionalProperties": false
          },
          "accreditationId": {
            "type": [
              "string",
              "null"
            ]
          },
          "glassRecyclingProcess": {
            "type": [
              "array",
              "null"
            ],
            "minItems": 1,
            "maxItems": 1,
            "items": {
              "type": [
                "string",
                "null"
              ],
              "enum": [
                "glass_re_melt",
                "glass_other",
                null
              ]
            }
          },
          "noticeAddress": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "line1": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "line2": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "town": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "county": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "country": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "postcode": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "region": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "fullAddress": {
                "type": [
                  "string",
                  "null"
                ]
              }
            },
            "additionalProperties": false
          },
          "cbduNumber": {
            "type": [
              "string",
              "null"
            ],
            "minLength": 8,
            "maxLength": 10,
            "pattern": "^[cC][bB][dD][uU]"
          },
          "wasteManagementPermits": {
            "type": [
              "array",
              "null"
            ],
            "minItems": 1,
            "items": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "type": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "enum": [
                    "environmental_permit",
                    "installation_permit",
                    "waste_exemption",
                    null
                  ]
                },
                "permitNumber": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "exemptions": {
                  "type": [
                    "array",
                    "null"
                  ],
                  "minItems": 1,
                  "items": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "properties": {
                      "reference": {
                        "type": [
                          "string",
                          "null"
                        ],
                        "pattern": "^[wW][eE][xX]\\d{6}$"
                      },
                      "exemptionCode": {
                        "type": [
                          "string",
                          "null"
                        ],
                        "pattern": "^[a-zA-Z]\\d{1,2}$"
                      },
                      "materials": {
                        "type": [
                          "array",
                          "null"
                        ],
                        "minItems": 1,
                        "items": {
                          "type": [
                            "array",
                            "boolean",
                            "number",
                            "object",
                            "string",
                            "null"
                          ],
                          "enum": [
                            "aluminium",
                            "fibre",
                            "glass",
                            "paper",
                            "plastic",
                            "steel",
                            "wood",
                            null
                          ]
                        }
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "authorisedMaterials": {
                  "type": [
                    "array",
                    "null"
                  ],
                  "minItems": 1,
                  "items": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "properties": {
                      "material": {
                        "type": [
                          "string",
                          "null"
                        ],
                        "enum": [
                          "aluminium",
                          "fibre",
                          "glass",
                          "paper",
                          "plastic",
                          "steel",
                          "wood",
                          null
                        ]
                      },
                      "authorisedWeightInTonnes": {
                        "type": [
                          "number",
                          "null"
                        ]
                      },
                      "timeScale": {
                        "type": [
                          "string",
                          "null"
                        ],
                        "enum": [
                          "weekly",
                          "monthly",
                          "yearly",
                          null
                        ]
                      }
                    },
                    "additionalProperties": false
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "approvedPersons": {
            "type": [
              "array",
              "null"
            ],
            "minItems": 1,
            "items": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "fullName": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "email": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "email"
                },
                "phone": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "jobTitle": {
                  "type": [
                    "string",
                    "null"
                  ]
                }
              },
              "additionalProperties": false
            }
          },
          "suppliers": {
            "type": [
              "string",
              "null"
            ]
          },
          "exportPorts": {
            "type": [
              "array",
              "null"
            ],
            "minItems": 1,
            "items": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "yearlyMetrics": {
            "type": [
              "array",
              "null"
            ],
            "minItems": 1,
            "items": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "year": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "minimum": 2024,
                  "maximum": 2100
                },
                "input": {
                  "type": [
                    "object",
                    "null"
                  ],
                  "properties": {
                    "type": {
                      "type": [
                        "string",
                        "null"
                      ],
                      "enum": [
                        "actual",
                        "estimated",
                        null
                      ]
                    },
                    "ukPackagingWasteInTonnes": {
                      "type": [
                        "number",
                        "null"
                      ]
                    },
                    "nonUkPackagingWasteInTonnes": {
                      "type": [
                        "number",
                        "null"
                      ]
                    },
                    "nonPackagingWasteInTonnes": {
                      "type": [
                        "number",
                        "null"
                      ]
                    }
                  },
                  "additionalProperties": false
                },
                "rawMaterialInputs": {
                  "type": [
                    "array",
                    "null"
                  ],
                  "minItems": 1,
                  "items": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "properties": {
                      "material": {
                        "type": [
                          "string",
                          "null"
                        ]
                      },
                      "weightInTonnes": {
                        "type": [
                          "number",
                          "null"
                        ]
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "output": {
                  "type": [
                    "object",
                    "null"
                  ],
                  "properties": {
                    "type": {
                      "type": [
                        "string",
                        "null"
                      ],
                      "enum": [
                        "actual",
                        "estimated",
                        null
                      ]
                    },
                    "sentToAnotherSiteInTonnes": {
                      "type": [
                        "number",
                        "null"
                      ]
                    },
                    "contaminantsInTonnes": {
                      "type": [
                        "number",
                        "null"
                      ]
                    },
                    "processLossInTonnes": {
                      "type": [
                        "number",
                        "null"
                      ]
                    }
                  },
                  "additionalProperties": false
                },
                "productsMadeFromRecycling": {
                  "type": [
                    "array",
                    "null"
                  ],
                  "minItems": 1,
                  "items": {
                    "type": [
                      "object",
                      "null"
                    ],
                    "properties": {
                      "name": {
                        "type": [
                          "string",
                          "null"
                        ]
                      },
                      "weightInTonnes": {
                        "type": [
                          "number",
                          "null"
                        ]
                      }
                    },
                    "additionalProperties": false
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "plantEquipmentDetails": {
            "type": [
              "string",
              "null"
            ]
          },
          "submitterContactDetails": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "fullName": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "email": {
                "type": [
                  "string",
                  "null"
                ],
                "format": "email"
              },
              "phone": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "jobTitle": {
                "type": [
                  "string",
                  "null"
                ]
              }
            },
            "additionalProperties": false
          },
          "samplingInspectionPlanPart1FileUploads": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "defraFormUploadedFileId": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "defraFormUserDownloadLink": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "uri"
                },
                "s3Uri": {
                  "type": [
                    "string",
                    "null"
                  ]
                }
              },
              "additionalProperties": false
            }
          },
          "orsFileUploads": {
            "type": [
              "array",
              "null"
            ],
            "minItems": 1,
            "items": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "defraFormUploadedFileId": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "defraFormUserDownloadLink": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "uri"
                },
                "s3Uri": {
                  "type": [
                    "string",
                    "null"
                  ]
                }
              },
              "additionalProperties": false
            }
          }
        },
        "additionalProperties": false
      }
    },
    "accreditations": {
      "type": "array",
      "default": [],
      "items": {
        "type": [
          "object",
          "null"
        ],
        "properties": {
          "id": {
            "type": [
              "string",
              "null"
            ],
            "readOnly": true
          },
          "status": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "created",
              "approved",
              "cancelled",
              "rejected",
              "suspended",
              null
            ]
          },
          "validFrom": {
            "type": [
              "string",
              "null"
            ],
            "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
          },
          "validTo": {
            "type": [
              "string",
              "null"
            ],
            "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
          },
          "accreditationNumber": {
            "type": [
              "string",
              "null"
            ]
          },
          "formSubmissionTime": {
            "type": [
              "string",
              "null"
            ],
            "format": "date-time"
          },
          "submittedToRegulator": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "ea",
              "nrw",
              "sepa",
              "niea",
              null
            ]
          },
          "orgName": {
            "type": [
              "string",
              "null"
            ]
          },
          "material": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "aluminium",
              "fibre",
              "glass",
              "paper",
              "plastic",
              "steel",
              "wood",
              null
            ]
          },
          "glassRecyclingProcess": {
            "type": [
              "array",
              "null"
            ],
            "minItems": 1,
            "maxItems": 1,
            "items": {
              "type": [
                "string",
                "null"
              ],
              "enum": [
                "glass_re_melt",
                "glass_other",
                null
              ]
            }
          },
          "wasteProcessingType": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "reprocessor",
              "exporter",
              null
            ]
          },
          "reprocessingType": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "input",
              "output",
              null
            ]
          },
          "site": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "address": {
                "type": [
                  "object",
                  "null"
                ],
                "properties": {
                  "line1": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "postcode": {
                    "type": [
                      "string",
                      "null"
                    ]
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          "prnIssuance": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "tonnageBand": {
                "type": [
                  "string",
                  "null"
                ],
                "enum": [
                  "up_to_500",
                  "up_to_5000",
                  "up_to_10000",
                  "over_10000",
                  null
                ]
              },
              "signatories": {
                "type": [
                  "array",
                  "null"
                ],
                "minItems": 1,
                "items": {
                  "type": [
                    "object",
                    "null"
                  ],
                  "properties": {
                    "fullName": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "email": {
                      "type": [
                        "string",
                        "null"
                      ],
                      "format": "email"
                    },
                    "phone": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "jobTitle": {
                      "type": [
                        "string",
                        "null"
                      ]
                    }
                  },
                  "additionalProperties": false
                }
              },
              "incomeBusinessPlan": {
                "type": [
                  "array",
                  "null"
                ],
                "maxItems": 7,
                "minItems": 7,
                "items": {
                  "type": [
                    "object",
                    "null"
                  ],
                  "properties": {
                    "percentIncomeSpent": {
                      "type": [
                        "number",
                        "null"
                      ]
                    },
                    "usageDescription": {
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "detailedExplanation": {
                      "type": [
                        "string",
                        "null"
                      ]
                    }
                  },
                  "additionalProperties": false
                }
              }
            },
            "additionalProperties": false
          },
          "submitterContactDetails": {
            "type": [
              "object",
              "null"
            ],
            "properties": {
              "fullName": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "email": {
                "type": [
                  "string",
                  "null"
                ],
                "format": "email"
              },
              "phone": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "jobTitle": {
                "type": [
                  "string",
                  "null"
                ]
              }
            },
            "additionalProperties": false
          },
          "samplingInspectionPlanPart2FileUploads": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "defraFormUploadedFileId": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "defraFormUserDownloadLink": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "uri"
                },
                "s3Uri": {
                  "type": [
                    "string",
                    "null"
                  ]
                }
              },
              "additionalProperties": false
            }
          },
          "orsFileUploads": {
            "type": [
              "array",
              "null"
            ],
            "minItems": 1,
            "items": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "defraFormUploadedFileId": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "defraFormUserDownloadLink": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "uri"
                },
                "s3Uri": {
                  "type": [
                    "string",
                    "null"
                  ]
                }
              },
              "additionalProperties": false
            }
          }
        },
        "additionalProperties": false
      }
    }
  },
  "required": [
    "companyDetails",
    "formSubmissionTime",
    "orgId",
    "submittedToRegulator",
    "submitterContactDetails",
    "wasteProcessingTypes",
    "schemaVersion"
  ],
  "additionalProperties": false
}